<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
    <title>index</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
   <div class="all">
       <div class="head">
           <div class="location">
               <span class="location-span">
                   <img src="./img/index-location.png" alt="">
                   浦东新区张江高科技园区内
                   <a href=""><img src="./img/index-icondown.png" alt=""></a>
               </span>
           </div>
           <div class="search">
               <a href="">
                   <img src="./img/index-search.png" alt="">
                   请输入商家或商品名称
               </a>
           </div>
       </div>
       <div class="main">
           <div class="carousel">
               <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                   <ol class="carousel-indicators">
                       <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                       <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                       <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                   </ol>
                   <div class="carousel-inner" role="listbox">
                       <div class="item active">
                           <img src="./img/index-carousel.png" alt="">
                           <div class="carousel-caption">
                               <!--John Rise-->
                           </div>
                       </div>
                       <div class="item">
                           <img src="./img/index-carousel.png" alt="">
                           <div class="carousel-caption">
                               <!--Eva Ital-->
                           </div>
                       </div>
                       <div class="item">
                           <img src="./img/index-carousel.png" alt="">
                           <div class="carousel-caption">
                               <!--Mono Kai-->
                           </div>
                       </div>

                   </div>
               </div>
               <div></div>
           </div>

           <div class="hot">
               <a href=""><img src="./img/index-hoticon1.png" alt=""><p>品牌馆</p></a>
               <a href=""><img src="./img/index-hoticon2.png" alt=""><p>预定早餐</p></a>
               <a href=""><img src="./img/index-hoticon3.png" alt=""><p>新店特惠</p></a>
               <a href=""><img src="./img/index-hoticon4.png" alt=""><p>限时抢购</p></a>
               <a href=""><img src="./img/index-hoticon5.png" alt=""><p>夜宵</p></a>
               <a href=""><img src="./img/index-hoticon6.png" alt=""><p>水果</p></a>
               <a href=""><img src="./img/index-hoticon7.png" alt=""><p>鲜花蛋糕</p></a>
               <a href=""><img src="./img/index-hoticon8.png" alt=""><p>推荐有奖</p></a>
           </div>
           <div class="list">
               <div class="nav">
                   <div>
                       <a href="">
                           <p>分类</p>
                           <img src="./img/index-listicondown.png" alt="">
                       </a>
                   </div>
                   <div>
                       <a href="">
                           <p>排序</p>
                           <img src="./img/index-listicondown.png" alt="">
                       </a>
                   </div>
                   <div>
                       <a href="">
                           <p>筛选</p>
                           <img src="./img/index-listicondown.png" alt="">
                       </a>
                   </div>
               </div>
               <ul class="merchantlist">
                   <li class="details">
                           <img src="./img/index-listicon1.png" alt="" class="headimg">
                           <div>
                               <ul>
                                   <li>
                                       <div>
                                           <p class="left name">必胜客欧尚餐厅</p>
                                           <span class="right">
                                           <p class="money big">¥30</p>
                                           <p>起送</p>
                                      </span>
                                       </div>
                                       <div>
                                         <span class="left">
                                           <img src="./img/index-liststart.png" alt="" class="start">
                                           <p>(53)</p>
                                           <p>月售167单</p>
                                         </span>
                                           <span class="right">
                                           <p class="money">¥7</p>
                                           <p>配送费</p>
                                        </span>
                                       </div>
                                       <div>
                                           <p class="left">2.54千米</p>
                                           <span class="right">
                                            <img src="./img/index-listlogo.png" alt="" class="logo">
                                        </span>
                                       </div>
                                   </li>
                                   <li>
                                    <span class="left">
                                        <a class="a discount">减</a>
                                        <p>满120元减30元</p>
                                    </span>
                                       <span class="left">
                                       <a class="a deductible">抵</a>
                                       <p>在该商家用抵用券订餐可抵10元</p>
                                   </span>
                                   </li>
                               </ul>
                           </div>
                   </li>

                   <li class="details">
                       <img src="./img/index-listicon1.png" alt="" class="headimg">
                       <div>
                           <ul>
                               <li>
                                   <div>
                                       <p class="left name">必胜客欧尚餐厅</p>
                                       <span class="right">
                                           <p class="money big">¥30</p>
                                           <p>起送</p>
                                      </span>
                                   </div>
                                   <div>
                                         <span class="left">
                                           <img src="./img/index-liststart.png" alt="" class="start">
                                           <p>(53)</p>
                                           <p>月售167单</p>
                                         </span>
                                       <span class="right">
                                           <p class="money">¥7</p>
                                           <p>配送费</p>
                                        </span>
                                   </div>
                                   <div>
                                       <p class="left">2.54千米</p>
                                       <span class="right">
                                            <img src="./img/index-listlogo.png" alt="" class="logo">
                                        </span>
                                   </div>
                               </li>
                               <li>
                                    <span class="left">
                                        <a class="a discount">减</a>
                                        <p>满120元减30元</p>
                                    </span>
                                   <span class="left">
                                       <a class="a deductible">抵</a>
                                       <p>在该商家用抵用券订餐可抵10元</p>
                                   </span>
                               </li>
                           </ul>
                       </div>
                   </li>

                   <li class="details">
                       <img src="./img/index-listicon1.png" alt="" class="headimg">
                       <div>
                           <ul>
                               <li>
                                   <div>
                                       <p class="left name">必胜客欧尚餐厅</p>
                                       <span class="right">
                                           <p class="money big">¥30</p>
                                           <p>起送</p>
                                      </span>
                                   </div>
                                   <div>
                                         <span class="left">
                                           <img src="./img/index-liststart.png" alt="" class="start">
                                           <p>(53)</p>
                                           <p>月售167单</p>
                                         </span>
                                       <span class="right">
                                           <p class="money">¥7</p>
                                           <p>配送费</p>
                                        </span>
                                   </div>
                                   <div>
                                       <p class="left">2.54千米</p>
                                       <span class="right">
                                            <img src="./img/index-listlogo.png" alt="" class="logo">
                                        </span>
                                   </div>
                               </li>
                               <li>
                                    <span class="left">
                                        <a class="a discount">减</a>
                                        <p>满120元减30元</p>
                                    </span>
                                   <span class="left">
                                       <a class="a deductible">抵</a>
                                       <p>在该商家用抵用券订餐可抵10元</p>
                                   </span>
                               </li>
                           </ul>
                       </div>
                   </li>
               </ul>
           </div>
       </div>
       <div class="foot">
           <a href=""><img src="./img/active-pageicon1.png" alt=""><p>外卖</p></a>
           <a href="order.html"><img src="./img/pageicon2.png" alt=""><p>订单</p></a>
           <a href="find.html"><img src="./img/pageicon3.png" alt=""><p>发现</p></a>
           <a href="mine.html"><img src="./img/pageicon4.png" alt=""><p>我的</p></a>
       </div>
   </div>


   <script type="text/javascript" src="./jquery-3.2.1.min.js"></script>
   <script type="text/javascript" src="./js/bootstrap.min.js"></script>
   <script>
       $(document).ready(function(){

           var head = $(".head");
           var main = $(".main");
           var foot = $(".foot");
           var merchantlist = $(".merchantlist");
           var details = $(".details");
           var lastdetail = details.eq(details.length-1);

           var headHeight = parseInt(head.css("height").substring(0,2));
           $(document).on("scroll",function(){
//               TopBar置顶效果
               if( $(document).scrollTop() >= headHeight/2 ) {
                   head.css("position","fixed");
                   head.css("top","-30px");
                   head.css("z-index","99");
                   main.css("margin-top",headHeight+"px");
               }
               if( $(document).scrollTop() <= headHeight/2) {
                   head.css("position","relative");
                   head.css("top","0");
                   main.css("margin-top","0")
               }
//                商家列表瀑布流加载
               if($(window).height()+$(document).scrollTop()-foot.height() >= lastdetail.offset().top) {
                   lastdetail.clone(true).appendTo(merchantlist);
                   details = $(".details");
                   lastdetail = details.eq(details.length-1);
               }
           });

           details.on("click",function(){
               $(window).attr("location","merchantlist.html")
           });

       });
   </script>
</body>
</html>